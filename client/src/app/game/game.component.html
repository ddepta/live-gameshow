<div class="game-container" *ngIf="gameData && currentQuestion">
  <div
    class="content"
    [ngClass]="{
      'animate-out-left': isAnimatingOut && animationDirection === 'next',
      'animate-out-right': isAnimatingOut && animationDirection === 'prev',
      'animate-in-right': isAnimatingIn && animationDirection === 'next',
      'animate-in-left': isAnimatingIn && animationDirection === 'prev'
    }"
  >
    <div class="game-view-container">
      <div class="game-info">
        <div class="question-content">
          <!-- Left navigation arrow - only visible to moderator -->
          <button
            *ngIf="isModerator"
            class="nav-arrow nav-arrow-left"
            [disabled]="currentQuestionIndex === 0 || isAnimating"
            (click)="previousQuestion()"
          >
            <ng-icon name="typChevronLeft"></ng-icon>
          </button>

          <p class="question-text">{{ currentQuestion.question }}</p>

          <!-- Right navigation arrow - only visible to moderator -->
          <button
            *ngIf="isModerator"
            class="nav-arrow nav-arrow-right"
            [disabled]="
              currentQuestionIndex === gameData.questions.length - 1 ||
              isAnimating
            "
            (click)="nextQuestion()"
          >
            <ng-icon name="typChevronRight"></ng-icon>
          </button>
        </div>
      </div>

      <!-- Replace the counter with correct answer / counter based on role -->
      <div
        *ngIf="isModerator"
        class="question-answer"
        [class.blurred]="isAnswerBlurred"
        (click)="toggleAnswerBlur()"
      >
        <!-- Show correct answer for moderators -->
        <div class="correct-answer-container">
          Antwort: {{ currentQuestion.correctAnswer }}
        </div>
      </div>
    </div>

    <!-- Updated multiple choice section with confirmation button -->
    <div
      class="options-container"
      *ngIf="currentQuestion.type === 'multipleChoice'"
    >
      <div class="options-grid">
        <div class="option-btn" *ngFor="let option of currentQuestion.options">
          <p-button
            [outlined]="selectedAnswer !== option"
            (onClick)="selectAnswer(option)"
            styleClass="w-full"
            [disabled]="multipleChoiceSubmitted"
          >
            {{ option }}
          </p-button>
        </div>
      </div>

      <!-- Add confirm button -->
      <button
        class="confirm-button"
        [class.submitted]="multipleChoiceSubmitted"
        (click)="confirmMultipleChoice()"
        [disabled]="!selectedAnswer"
      >
        <ng-icon
          [name]="
            multipleChoiceSubmitted
              ? 'phosphorCheckFatFill'
              : 'phosphorCheckFat'
          "
        ></ng-icon>
      </button>
    </div>

    <div class="buzzer-container" *ngIf="currentQuestion.type === 'buzzer'">
      <app-buzzer
        [lobbyCode]="lobbyCode"
        [isModerator]="true"
        size="large"
      ></app-buzzer>
    </div>

    <div
      class="estimation-container"
      *ngIf="currentQuestion.type === 'estimation'"
    >
      <div class="estimation-input-container">
        <textarea
          type="text"
          #estimationInput
          class="estimation-input"
          placeholder="SchÃ¤tzung..."
          pTextarea
          (input)="adjustFontSize(estimationInput)"
          [disabled]="estimationSubmitted"
          autofocus
        ></textarea>
      </div>

      <button
        class="confirm-button"
        [class.submitted]="estimationSubmitted"
        (click)="submitEstimation(estimationInput.value)"
      >
        <ng-icon
          [name]="
            estimationSubmitted ? 'phosphorCheckFatFill' : 'phosphorCheckFat'
          "
        ></ng-icon>
      </button>
    </div>
  </div>

  <div class="loading-info" *ngIf="!gameData">
    <p>Spielinformationen werden geladen...</p>
  </div>
</div>
